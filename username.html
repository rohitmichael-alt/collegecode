<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Username</title>
    <link rel="stylesheet" href="renderer/styles.css">
</head>
<body>
    <header>
        <button class="back-button" onclick="navigateBack()">‚Üê Back</button>
        <h2>Change Username</h2>
    </header>

    <div class="content-container">
        <form onsubmit="saveUsername(event)">
            <input 
                type="text" 
                id="newUsername" 
                placeholder="Enter new username" 
                minlength="6" 
                required
            >
            <div id="usernameError" class="error-message"></div>
            <button type="submit" class="primary-button">Save Changes</button>
        </form>
    </div>

    <script>
        function saveUsername(event) {
            event.preventDefault();
            const newUsername = document.getElementById("newUsername").value.trim();
            const errorElement = document.getElementById("usernameError");
            
            if (newUsername.length < 6) {
                errorElement.textContent = "Username must be at least 6 characters long.";
                return;
            }

            // Save new username to both localStorage entries
            localStorage.setItem("username", newUsername);
            localStorage.setItem("loggedInUser", newUsername);
            alert("Username updated successfully!");
            navigateBack();
        }

        function navigateBack() {
            window.location.href = "settings.html";
        }
    </script>
</body>
</html>